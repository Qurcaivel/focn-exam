## 59. Среды передачи данных на основе оптоволоконных кабелей

Рабочим компонентом оптоволоконных кабелей являются световоды, изготовленные из оптоволокна, т.е. особого кварцевого стекла.

Так как оптоволокно очень хрупкое, его многократно защищают различными способами. 

Световод - это оптический волновод.

Рабочими компонентами самого световода являются оболочка (cladding) и сердцевина (core).

![image](./.assets/fiber_structure.png)

В стандартах предусмотрены 8 базовых видов световодов: OM1, OM2, OM3, OM4, OM5, OS1, OS1a, OS2.

Отличаются полосой пропускания и другими техническими характеристиками.

 Дополнительно оптоволоконные кабели делят на два типа:
- Содержащие упрочняющие металлизированные конструкции или проводники;
- Полностью диэлектрические.

Оптоволоконные соединения выполняют двумя способами:
1. Разъемным, причем может быть:
    - контактным;
    - линзовым.
2. Неразъемным, причем может быть:
    - сплавным;
    - механическим.

![image](./.assets/fiber_segment_structure.png)

Оптоволоконные соединения выполняют двумя способами:
- Разъемным;
- Неразъемным.

## 60. Физический уровень Ethernet

Ключевые стандарты, описывающие физический уровень Ethernet:
<!--кроме стандартов в лекциях про это ни слова-->

- 10BASE5 (1983) - «толстый» (thick) коаксиальный кабель 50Ω (до 500 m) плюс внешние приемопередатчики;
- 10BASE2 (802.3a, 1985) - «тонкий» (thin) коаксиальный кабель 50 Ω (до 185 m) плюс интегрированные приемопередатчики;
- 10BASE-T (802.3i, 1990) - две телефонные витые пары (до 100 m); 
- 10BASE-FL (802.3j, 1993) - два многорежимных световода (до 500 m) плюс нечетко регламентированные источники излучения (обычно LEDs);
- 100BASE-TX (802.3u, 1995) - две неэкранированные либо экранированные витые пары категории 5 (до 100 m);
- 100BASE-FX (802.3u, 1995) - два многорежимных световода (до 2 km) (реализации поддерживают и однорежимные световоды длиной десятки километров) плюс нечетко регламентированные источники излучения (реализации поддерживают LEDs и лазеры);
- 1000BASE-SX (802.3z, 1998) - два многорежимных световода (до 275 m -- 62,5 um, до 550 m - 50 um) плюс коротковолновые (short wavelength) лазеры (770 - 860 nm);
- 1000BASE-LX (802.3z, 1998) - два однорежимных (до 5 km) либо многорежимных световода (до 550 m) плюс длинноволновые (long wavelength) лазеры (1270 - 1355 nm);
- 1000BASE-T (802.3ab, 1999) -- четыре неэкранированные либо экранированные витые пары категории 5 (до 100 m);
- 2.5GBASE-T (802.3bz, 2016) - четыре неэкранированные либо экранированные витые пары категории 5e (расстояние до 100 m);
- 5GBASE-T (802.3bz, 2016) - четыре неэкранированные либо экранированные витые пары категории 5e (расстояние до 100 m);
- 10GBASE-SR (802.3ae, 2002) - два многорежимных световода (до 33 m - 62,5 um, до 400 m - 50 um) плюс коротковолновые лазеры (840 - 860 nm);
- 10GBASE-LR (802.3ae, 2002) - два однорежимных световода (до 10 km) плюс длинноволновые лазеры (1310 nm);
- 10GBASE-ER (802.3ae, 2002) - два однорежимных световода (до 30 km) плюс экстрадлинноволновые (extra long wavelength) лазеры (1550 nm);
- 10GBASE-T (802.3an, 2006) - четыре неэкранированные (до 55 m) либо экранированные (до 100 m) витые пары категории 6, либо четыре неэкранированные либо экранированные витые пары категории 6A (до 100 m).

## 61. Структурированные кабельные системы и их модели

Структурированная кабельная система – упорядоченная совокупность телекоммуникационных и силовых кабелей, различного сетевого оборудования, а также соответствующих специализированных помещений.

Основой для построения любой СКС является древовидная топология,
узлами которой служит сетевое оборудование определенного типа
(distributors).

В связи с этим, технические помещения СКС (так же distributors) делят на два типа:
1. Кроссовые (telecommunications rooms).
2. Аппаратные (equipment rooms).
Аппаратные отличаются от кроссовых тем, что в них, наряду с активным, пассивным, монтажным и вспомогательным сетевым оборудованием, может быть размещено серверное оборудование.

СКС включает в себя три подсистемы:
- Подсистема внешних магистралей - организация связи между зданиями на небольшой территории;
- Подсистема внутренних магистралей или вертикальная - связывает между собой этажи одного здания;
- Горизонтальная подсистема - связывает между собой оборудование в пределах этажа.

![image](./.assets/sks.png)

![image](./.assets/sks2.png)

![image](./.assets/sks3.png)

где:
- КВМ – кроссовая внешних магистралей;
- КЗ – кроссовая здания;
- КЭ – кроссовая этажа;
- ТП – точка перехода;
- ИР – информационная розетка рабочего места.

## 62. Питание и заземление в структурированных кабельных системах

Заземление необходимо для:
- Предотвращения удара током людей;
- Защиты кабелей и сетевого оборудования от выхода из строя и помех;
- Обеспечения возможности прохождения сигналов применительно к некоторым видам сетевого оборудования.

Согласно стандарту TIA-607, в дополнение к основному контуру заземления здания либо сооружения, создают так называемый телекоммуникационный контур заземления.

Рекомендации стандартов по заземлению экранов кабелей:
- В аппаратных и кроссовых экраны должны заземляться по возможности на телекоммуникационный контур;
- Экраны вертикальной подсистемы должны заземляться с обоих концов;
- Экраны горизонтальной подсистемы достаточно заземлять с одного конца.

Для защиты от электрических разрядов в атмосфере (особенно вертикальной подсистемы) применяют специальные устройства - грозоразрядники (lightning gaps).

## 63. Пожарная безопасность структурированных кабельных систем

Существует 4 уровня классификации кабелей относительно пожарной безопасности:
- Plenum – кабели для прокладки в plenum-полостях (есть приток воздуха, для постоянного горения);
- Riser – кабели для прокладки в кабельных шахтах;
- General purpose – кабели для прокладки где угодно, кроме plenum-полостей и кабельных шахт;
- Residential – кабели на прокладку которых наложены ограничения (например, только для жилых помещений).

В состав маркировок кабелей часто входят буквенные обозначения материалов оболочек:
- PVC (PolyVinyl Chloride) – ПВХ;
- PE (PolyEthylene) – полиэтилен;
- PA (PolyAmide) – полиамид (нейлон);
- FR (Flame Retardant) – огнестойкий;
- LS (Low Smoke) – низкое выделение дыма при горении;
- NC (None Corrosive) – не подвержен коррозии;
- UVR (Ultra Violet Resistant) – не подвержен влиянию ультрафиолетового излучения;
- HF (Halogen Free) – не содержит галогенов.

## 64. Технология PoE

PoE (Power over Ethernet) – технологии, задачей которых является предоставления способа запитки маломощных Ethernet устройств через информационные кабели (на основе витых пар).

Существует два соответствующих стандарта: 802.3af и 802.3at, однако множество производителей используют свои проприетарные технологии.

В структуру PoE-системы входят:
- PSE (Power Sourcing Equipment) – вводит питающее напряжение в кабель;
- PD (Power Device) – питается от напряжения.

PSE может располагаться либо на конце кабеля, либо вклиниваться в кабель (PoE-инжектор).

Иногда PoE используется и для запитывания «небольших» PD, PoE не поддерживающих, со стороны PD в кабель «вклинивается» PoE-DC- адаптер.

## 65. Структура системы FTP

FTP (File Transfer Protocol) – протокол прикладного уровня, предназначенный для пересылки файлов между двумя удаленными станциями. Базируется на клиент-серверной модели и использует транспорт TCP.

![image](./.assets/ftp_struct.png)

FTP-клиент обслуживает запросы пользователя и работает на локальной по отношению к пользователю станции.

На рисунке показана взаимосвязь между одним FTP-клиентом и одним FTP-сервером, но возможна также схема взаимодействия когда по инициативе FTP-клиента осуществляется файловый обмен между двумя FTP-серверами.

FTP-сервер обслуживает запросы FTP-клиента и работает на удаленной станции.

Выделяют протокольные интерпретаторы и процессы пересылки данных.

FTP-сервер представляет собой непрерывно выполняющуюся программу, ожидающую запросы от FTP-клиентов, выраженную в виде демона UNIX либо сервиса Windows.

В ОС UNIX работа демонов обычно контролируется конфигурационными файлами, а в Windows - соответствующими оконными средствами.

FTP задействует два соединения, а значит и два порта:
- 20 – FTP Data – информационное соединение;
- 21 – FTP – управляющее соединение.

В некоторых особых ситуациях может происходить отказ от использования стандартных портов.

## 66. Протокол FTP и режимы обмена по протоколу FTP

Взаимодействие по протоколу FTP базируется на модели запрос-ответ с применением тайм-аутов.

FTP-команда представляет из себя последовательность из 3-4 букв (регистр не учитывается), за которыми могут следовать аргументы, разделяемые пробелом `<SP>`. Команда завершается символами возврата каретки и перевода строки `<CRLF>`.

Некоторые команды протокола FTP:
- USER `<username>` - имя пользователя;
- PASS `<password>` - пароль, должна следовать после USER;
- CWD `<pathname>` - сменить рабочий каталог удаленной ФС;
- CDUP – перейти к родительскому каталогу;
- QUIT – выход из удаленной системы;
- PORT `<host-port>` - Совокупность IP-адреса и номера порта, необходимая для создания data connection (`<h1>`,`<h2>`, `<h3>`,`<h4>`,`<p1>`,`<p2>`);
- PASV – установить пассивный режим обмена;
- TYPE `<typecode>` - файловое представление;
- RETR `<pathname>` - загрузить файл с FTP-сервера (download);
- STOR `<pathname>` - загрузить файл на FTP-сервер (upload), если файл с таким названием уже есть, то перезаписать;
- APPE `<pathname>` - загрузить файл на FTP-сервер (upload), если файл с таким названием уже есть, то данные дописываются в конец;
- DELE `<pathname>` - удалить файл или каталог на FTP-сервере;
- RMD `<pathname>` - удалить каталог на FTP-сервере;
- MKD `<pathname>` - создать каталог на FTP-сервере;
- PWD – вывести на экран рабочий каталог;
- LIST `[<pathname>]` – вывести список файлов удаленного каталога.

Каждый FTP-запрос должен сопровождаться как минимум одним FTP-ответом.

FTP-ответ кодируется так:

$$xyz, SP, text, CRLF$$

где $xyz$ – целочисленный трехбайтный код.

![image](./.assets/ftp-response-codes.png)

В зависимости от того, какая сторона является инициатором установления информационного соединения различают активный и пассивный режимы обмена. Активный режим более предпочтителен.

Отличие активного и пассивного режимов заключается в том, как создается информационное соединение: в активном режиме это происходит через команду `PORT <p>` от клиента к серверу, где $p$ - динамически выделенный порт клиента, $p \leftrightarrow 20$;

В пассивном режиме клиент отправляет команду `PASV`, ответом на которую является динамически выделенный порт сервера $p2$, после чего выделяется динамический порт клиента $p1$ и происходит создание связи $p1 \leftrightarrow p2$.

Файловое представление (data type, representation type) необходимо для согласования файловых систем передающей и принимающей сторон.

FTP поддерживает четыре основных файловых представления:
1. ASCII - файл считается текстовым и пересылается в 7-мибитной
кодировке NVT-ASCII (по умолчанию).
2. EBCDIC - файл считается текстовым и пересылается в 8-мибитной
кодировке EBCDIC фирмы IBM.
3. Image - файл считается бинарным и пересылается упакованным в 8-мибитные байты.
4. Local byte size - файл считается состоящим из неделимых байтов соответствующего размера (должен быть задан) и пересылается с учетом этого (если размер байта не кратен октету, то возникает автодополнение).

Дополнение к файловому представлению, в FTP предусмотрена
возможность структурировать файл при его пересылке по информационному соединению (data structure).

Поддерживаются три структуры:

1. File structure - файл не имеет внутренней структуры и рассматривается как непрерывный поток байтов (по умолчанию).
2. Record structure - файл рассматривается как последовательность записей, структура приемлема только для текстовых файлов.
3. Page structure - файл имеет страничную организацию, каждая страница имеет заголовок и индексацию, структура зависит от реализации.

Наконец, существует возможность установить режим пересылки (transmission mode).

Возможны три режима:

1. Stream - файл пересылается как непрерывный поток байтов (по
умолчанию); если файл не имеет внутренней структуры, то прием
метасимвола `<EOF>` означает, что пересылка окончена; для случаев со сложной структурой предусмотрены специальные коды для `<EOR>` и `<EOF>`.
2. Block - файл пересылается в виде последовательности блоков,
каждый из которых имеет заголовок, в котором записываются счетчик байтов и специальные коды; способ поддерживается редко.
3. Compressed - файл пересылается в сжатом простейшими алгоритмами виде; способ поддерживается редко.

В зависимости от того, какая из взаимодействующих сторон является инициатором установления информационного соединения различают активный и пассивный режимы обмена (data transfer process modes).

При этом направление пересылки файлов, то есть какая из сторон является отправителем, а какая получателем, значения не имеет.

Активный режим является рекомендуемым и наиболее используемым.

В активном режиме управляющее соединение создается следующим образом. FTP-клиент, используя динамически выделенный порт (с номером больше 1024), создает управляющее соединение с портом 21 FTP-сервера.

Затем FTP-клиент динамически выделяет еще один порт и посылает его номер FTP-серверу с помощью FTP-команды PORT.

Затем FTP-сервер создает информационное соединение с указанным портом, со своей стороны используя порт 20.

Если FTP-клиент не передал команду PORT, что в крайней степени не рекомендуется, то FTP-сервер создает информационное соединение с тем же самым портом FTP-клиента, который используется управляющим соединением.

Пассивный режим обычно устанавливается принудительно.

В пассивном режиме FTP-клиент создает как управляющее, так и информационное соединения с FTP-сервером.

После того, как аналогичным образом создано управляющее соединение FTP-клиент передает FTP-команду PASV FTP-серверу.

Получив ее, FTP-сервер динамически выделяет порт для информационного соединения и передает его номер FTP-клиенту с помощью FTP-ответа 227.

Затем FTP-клиент динамически выделяет еще один порт и создает информационное соединение с портом, номер которого получил от FTP- сервера.

![image](./.assets/ftp_exchange_modes.png)